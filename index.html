<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta charset="utf8">
  <title>Clean Ip Scanner</title>
  <link href="https://fonts.cdnfonts.com/css/iranian-sans" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <style type="text/css">
    body {
      font-family: 'Iranian Sans', sans-serif;
      font-size: 14px;
      direction: rtl;
      color: #333; /* Add a default text color */
      background-color: color(xyz 0.82 0.89 0.98); /* Add a background color */
    }
      .container {
      max-width: 960px; /* Limit the width of the container */
      margin: 0 auto; /* Center the container */
      padding: 0.5rem; /* Add some padding */
      box-shadow: 0 0 10px color(xyz-d50 0.84 0.85 0.68 / 0.1); /* Add a subtle shadow */
    }
      .btn {
      transition: all 0.3s cubic-bezier(0.33, 0.03, 0.26, 0.94); /* Add a transition for hover effects */
    }
      .btn:hover {
      transform: scale(1.1); /* Slightly scale up buttons on hover */
    }
        /* New styles */
    .btn:active {
      transform: scale(0.95); /* Slightly scale down buttons on active */
    }
    .form-control:focus {
      border-color: #007bff; /* Change border color on focus */
      box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25); /* Add a glow effect on focus */
    }
    .text-primary {
      color: #007bff !important; /* Change the primary color */
    }
    .glass-btn {
      background-color: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      color: lab(30 4.38 1.64);
      transition: all 0.3s ease;
    }
    .glass-btn:hover {
      background-color: rgba(255, 255, 255, 0.2);
      transform: scale(1.05);
    }
    .glass-btn:active {
      transform: scale(0.95);
    }
    .rounded-table {
      border-radius: 15px;
      overflow: hidden;
    }
    .custom-table-header {
      background-color: #495057;
      color: white;
    }

    /* Add more styles... */
  </style>
</head>
<body id="body">
  <div class="container border rounded-2 mt-2 border-dark">
    <div class="row">
      <div class="col-12 p-2 text-center border-bottom border-dark text-primary">
        <span class="lang-field lang-fa fw-bold">یافتن آی‌پی تمیز کلادفلر</span>
        <span class="lang-field lang-en fw-bold">Cloudflare's Clean IP Scanner</span>
        <div class="btn-group float-end" role="group" dir="ltr">
          <button id="btn-fa" class="btn btn-lang btn-outline-primary btn-sm rounded-2" type="button">FA</button>&nbsp;
          <button id="btn-en" class="btn btn-lang btn-outline-primary btn-sm rounded-2" type="button">EN</button>
        </div>
      </div>
    </div>
    <div class="row my-2">
      <label for="max-ip" class="col-sm-12 col-md-4 col-lg-2 col-form-label">
        <span class="lang-field lang-fa">تعداد آی‌پی:</span>
        <span class="lang-field lang-en">No. of IPs:</span>
      </label>
      <div class="col-sm-12 col-md-8 col-lg-4">
        <input class="form-control" type="number" id="max-ip" min="1" max="5000" step="5"  value="5" placeholder="Enter number of IPs">
      </div>
      <label for="max-latency" class="col-sm-12 col-md-4 col-lg-2 col-form-label">
        <span class="lang-field lang-fa">تاخیر مجاز:</span>
        <span class="lang-field lang-en">Max. Latency:</span>
      </label>
      <div class="col-sm-12 col-md-8 col-lg-4">
        <input class="form-control" type="number" id="max-latency" min="50" max="3000" step="50" value="500">
      </div>
    </div>
    <div class="row my-2">
      <label for="ip-regex" class="col-sm-12 col-md-4 col-lg-2 col-form-label">
        <span class="lang-field lang-fa">عبارت منظم:</span>
        <span class="lang-field lang-en">Regular expression:</span>
      </label>
      <div class="col-sm-12 col-md-8 col-lg-10">
        <input type="text" class="form-control" dir="ltr" id="ip-regex" placeholder="^104\.17\.|^141\.">
      </div>
    </div>
    <div class="row my-2">
      <label for="ip-include" class="col-sm-12 col-md-4 col-lg-2 col-form-label">
        <span class="lang-field lang-fa">فقط از این رنج آی‌پی:</span>
        <span class="lang-field lang-en">Ranges to include:</span>
      </label>
      <div class="col-sm-12 col-md-8 col-lg-4">
        <input type="text" class="form-control" dir="ltr" id="ip-include" placeholder="104.17.166.0/24,172.64.59.0/24">
      </div>
      <label for="ip-exclude" class="col-sm-12 col-md-4 col-lg-2 col-form-label">
        <span class="lang-field lang-fa">به‌جز این رنج آی‌پی:</span>
        <span class="lang-field lang-en">Ranges to exclude:</span>
      </label>
      <div class="col-sm-12 col-md-8 col-lg-4">
        <input type="text" class="form-control" dir="ltr" id="ip-exclude" placeholder="8,103.22">
      </div>
    </div>
    <div class="row my-2">
      <div class="btn-group col-xs-3 col-lg-4 my-1" role="group">
        <button type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#ip-ranges-modal">
          <span class="lang-field lang-fa">مشاهده‌ی رنج آی‌پی‌ها</span>
          <span class="lang-field lang-en">View IP ranges</span>  
        </button>
        <div class="modal fade" id="ip-ranges-modal" tabindex="-1" aria-labelledby="ip-ranges-modal-label" aria-hidden="true">
          <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="ip-ranges-modal-label">
                  <span class="lang-field lang-fa">رنج آی‌پی‌ها</span>
                  <span class="lang-field lang-en">IP ranges</span>  
                </h5>
              </div>
              <div class="modal-body">
                <table dir="ltr" class="table table-striped text-center">
                  <tbody id="ip-ranges-body"></tbody>
                </table>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                  <span class="lang-field lang-fa">بستن</span>
                  <span class="lang-field lang-en">Close</span>  
                </button>
                <button type="button" class="btn btn-primary" onclick="copyToClipboard(cfIPv4.join(`\n`))">
                  <span class="lang-field lang-fa">کپی</span>
                  <span class="lang-field lang-en">Copy</span>  
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="btn-group col-xs-3 col-lg-4"></div>
      <div class="btn-group col-xs-6 col-lg-4 my-1" role="group">
        <button id="btn-start" class="btn btn-success btn-sm rounded-2 fw-bold" disabled type="button" onclick="startScan()">
          <span class="lang-field lang-fa">شروع</span>
          <span class="lang-field lang-en">Start</span>  
        </button>&nbsp;
        <button id="btn-cancel" class="btn btn-outline-secondary btn-sm rounded-2 fw-bold" disabled type="button" onclick="cancelScan()">
          <span class="lang-field lang-fa">لغو</span>
          <span class="lang-field lang-en">Cancel</span>  
        </button>
      </div>
    </div>
    <div class="row my-2 border-bottom border-dark py-3">
      <div id="start-hint" class="col-xs-12 col-lg-5 text-danger fw-bold py-1">
        <span class="lang-field lang-fa">قبل از شروع vpn خود را خاموش کنید!</span>
        <span class="lang-field lang-en">Turn off your VPN before start!</span>  
      </div>
      <div class="col col-xs-2 col-lg-1 py-2" id="test-no"></div>
      <div class="col col-xs-2 col-lg-1 py-2" id="out-no"></div>
      <div class="col col-xs-5 col-lg-3 py-2" id="ip-no"></div>
      <div class="col col-xs-2 col-lg-1 py-1" id="ip-try"></div>
      <div class="col col-xs-1 col-lg-1 py-1" id="ip-latency"></div>
    </div>
    <div class="table-responsive-md">
    <table class="table table-striped table-hover table-bordered table-sm rounded-table">
      <thead>
          <tr>
            <div class="d-flex justify-content-center">
            <div class="btn-group justify-content-center" role="group">
              <button type="button" class="btn glass-btn me-2 me-md-3" data-bs-toggle="tooltip" title="Copy" onclick="copyAllToClipboard()">
                <img height="20px" src="assets/icon-copy.png" /><br/> Copy
              </button>
              <button type="button" class="btn glass-btn me-2 me-md-3" data-bs-toggle="tooltip" title="Download as CSV" onclick="downloadAsCSV()">
                <img height="20px" src="assets/icon-csv.png" /><br/> CSV
              </button>
              <button type="button" class="btn glass-btn me-2 me-md-3" data-bs-toggle="tooltip" title="Download as JSON" onclick="downloadAsJSON()">
                <img height="20px" src="assets/icon-json.png" /><br/> JSON
              </button>
            </div>
            </div> 
          </tr>
        <tr>
          <th style="background-color: #23456a !important; color: white !important;" width="30"  style= "font-size: 14px; padding: 10px;">
            #
          </th>
          <th style="background-color: #23456a !important; color: white !important;" style="min-width: 110px; font-size: 12px;"">
            <span class="lang-field lang-fa">آی‌پی</span>
            <span class="lang-field lang-en">IP</span>  
          </th>
          <th style="background-color: #23456a !important; color: white !important;" style= "font-size: 12px;">
            <span class="lang-field lang-fa">بیشینه</span>
            <span class="lang-field lang-en">max</span>  
          </th>
          <th style="background-color:#23456a !important; color: white !important;" style= "font-size: 12px;">
            <span class="lang-field lang-fa">واریانس</span>
            <span class="lang-field lang-en">variance</span>  
          </th>
          <th style="background-color: #23456a !important; color: white !important;" style= "font-size: 12px;">
            <span class="lang-field lang-fa">میانگین</span>
            <span class="lang-field lang-en">average</span>  
          </th>
          <th style="background-color: #23456a !important; color: white !important;" style= "font-size: 12px;">
            <span class="lang-field lang-fa">کپی</span>
            <span class="lang-field lang-en">Copy</span>  
          </th>
        </tr>
      </thead>
      <tbody id="result" style= "font-size: 14px;">
      </tbody>
    </table>
    </div>
  </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<script src="./script.js"></script>
</html>
